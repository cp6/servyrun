import{A as M}from"./AuthenticatedLayout-e0b7f8ec.js";import{j as a,a as e,F as c,r as b,R as i,u as p,H as E}from"./app-3b14edf2.js";import{D as y,M as N,B as k}from"./Toast-1f814f61.js";import"./Table-29b362e9.js";import{z as T,v as j,d as G,h as O,j as w,H as q,a as z,n as K,A as X}from"./index.esm-b46f3593.js";import{R as V}from"./Alert-10dd726c.js";import{C as Y}from"./CreatedAtText-569a5c4f.js";import{U as J}from"./UpdatedAtText-53995cea.js";import{a as f}from"./axios-468742d6.js";import{B as Q}from"./BackButton-d8b9f37c.js";import{b as W}from"./index.esm-51371050.js";import"./ApplicationLogo-30229999.js";import"./transition-da3d9d06.js";import"./index-a84c5b70.js";function Z({resource:t}){return a("dl",{className:"flex items-center space-x-6 mt-2",children:[a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"CPU"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:t.cpu_cores??"-"})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Ghz"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:t.cpu_freq??"-"})]}),e("div",{children:(()=>t.disk_tb!==null?a(c,{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Disk TB"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:new Intl.NumberFormat("en-IN",{maximumSignificantDigits:3}).format(t.disk_tb)})]}):a(c,{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Disk GB"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:t.disk_gb===null?"-":new Intl.NumberFormat("en-IN",{maximumSignificantDigits:3}).format(t.disk_gb)})]}))()}),e("div",{children:(()=>t.ram_gb!==null?a(c,{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"RAM GB"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:new Intl.NumberFormat("en-IN",{maximumSignificantDigits:3}).format(t.ram_gb)})]}):a(c,{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"RAM MB"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:t.ram_mb===null?"-":new Intl.NumberFormat("en-IN",{maximumSignificantDigits:3}).format(t.ram_mb)})]}))()}),e("div",{children:(()=>{if(t.price!==null&&t.currency!==null)return a(c,{children:[a("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:["Price ",t.currency]}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:t.price})]})})()})]})}function $({connection:t=null}){return e(c,{children:e("dl",{className:"flex items-center space-x-6 mt-4",children:a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:(()=>typeof t<"u"&&t!==null?e("p",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300 inline",children:"Connection"}):e("p",{className:"mb-2 font-semibold leading-none text-yellow-500 dark:text-yellow-400 inline",children:"No connection set, create a connection to fetch more information."}))()}),e("dd",{className:"",children:e("p",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white inline",children:(()=>{if(typeof t<"u"&&t!==null)return typeof t.key_id<"u"&&t.key_id!==null?t.username+":"+t.ssh_port+" with key":t.password!=="undefined"?t.username+":"+t.ssh_port+" with password":""})()})})]})})})}function ee({resource:t}){return a(c,{children:[e("h2",{className:"my-2 text-2xl font-bold leading-none text-gray-900 md:text-2xl dark:text-white",children:t.hostname}),e("p",{className:"mb-4 text-lg font-semibold leading-none text-gray-600 md:text-lg dark:text-gray-200",children:t.location!==null?t.location.name:""}),e("dl",{children:e("dd",{className:"mb-4 font-light text-gray-600 sm:mb-5 dark:text-gray-300",children:t.ips.map(n=>a("p",{children:[e(T,{className:"mr-2 mb-1 h-5 w-5 inline hover:cursor-grab dark:text-gray-300",onClick:()=>{navigator.clipboard.writeText(n.ip)},title:"Copy IP"}),e("a",{href:route("ip.show",n.id),children:n.ip}),n.is_main?e(j,{className:"ml-2 mb-1 h-5 w-5 inline text-yellow-500",title:"Main ip"}):null,n.is_ssh?e(G,{className:"ml-2 mb-1 h-5 w-5 inline text-green-500",title:"SSH ip"}):null]},n.id))})})]})}function te({resource:t}){const[n,r]=b.useState(null),[d,h]=b.useState("Check if server is up"),m=()=>{f.get(route("check-is-up",t.id)).then(o=>{r(o.data.is_up)}).catch(o=>{r(!n)})};return e(c,{children:e(O,{className:(()=>n?"md:ml-3 ml-2 h-6 w-6 text-green-500 dark:text-green-400 inline hover:cursor-pointer":n===null?"md:ml-3 ml-2 h-6 w-6 text-gray-600 dark:text-white inline hover:cursor-pointer":"md:ml-3 ml-2 h-6 w-6 text-red-500 dark:text-red-400 inline hover:cursor-pointer")(),onClick:m,title:d})})}function ae({serverId:t,usage:n,uptime:r}){const[d,h]=i.useState(!1),[m,o]=i.useState(!1),[s,x]=i.useState("-"),[g,u]=i.useState("-"),[v,_]=i.useState("-"),[S,C]=i.useState("-"),[D,I]=i.useState("-"),[B,A]=i.useState("-"),[U,H]=i.useState("-"),[L,R]=i.useState("-"),[F,P]=i.useState("-");return a("div",{className:"grid md:grid-cols-2 grid-cols-1",children:[e("div",{className:"md:col-span-1 md:col-span-2",children:a("dl",{className:"flex items-center space-x-6 mt-4",children:[a("div",{children:[e("dt",{className:d?"mb-2 font-light leading-none text-white/50 dark:text-gray-900":"mb-2 font-light leading-none text-gray-900 dark:text-gray-300 hover:dark:text-gray-200",children:e(w,{title:"Refresh usage stats",onClick:()=>{h(!0),f.get(route("server.usage",t)).then(l=>{x(new Intl.NumberFormat("en-IN",{maximumSignificantDigits:2}).format(l.data.cpu_used_percent)),u(new Intl.NumberFormat("en-IN",{maximumSignificantDigits:3}).format(l.data.ram_used_percent)),_(l.data.disk_used_percent),C(new Intl.NumberFormat("en-IN",{maximumSignificantDigits:3}).format(l.data.disk_available_gb)+" GB"),console.log("Updated usage"),h(!1)}).catch(l=>{console.log("Error fetching usage data"),h(!1)})},className:d?"mt-2 h-5 w-5 text-white/50 dark:text-gray-700":"mt-2 h-5 w-5 hover:cursor-pointer"})}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white"})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"CPU %"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:s})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"RAM %"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:g})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Disk %"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:v})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Disk Avail"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:S})]})]})}),e("div",{className:"md:col-span-1 md:col-span-2",children:a("dl",{className:"flex items-center space-x-6 mt-4",children:[a("div",{children:[e("dt",{className:m?"mb-2 font-light leading-none text-white/50 dark:text-gray-900":"mb-2 font-light leading-none text-gray-900 dark:text-gray-300 hover:dark:text-gray-200",children:e(w,{title:"Refresh usage stats",onClick:()=>{o(!0),f.get(route("server.uptime",t)).then(l=>{I(l.data.last_minute),A(l.data.last_5_minutes),H(l.data.last_15_minutes),R(l.data.users),P(l.data.uptime),console.log("Updated uptime"),o(!1)}).catch(l=>{console.log("Error fetching uptime data"),o(!1)})},className:m?"mt-2 h-5 w-5 text-white/50 dark:text-gray-700":"mt-2 h-5 w-5 hover:cursor-pointer"})}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white"})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Load 1m"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:D})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Load 5m"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:B})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Load 15m"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:U})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Users"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:L})]}),a("div",{children:[e("dt",{className:"mb-2 font-light leading-none text-gray-900 dark:text-gray-300",children:"Uptime"}),e("dd",{className:"mb-4 font-semibold text-gray-600 sm:mb-5 dark:text-white",children:F})]})]})})]})}function re({serverId:t,servers:n}){const[r,d]=i.useState(!1),[h,m]=i.useState(null),[o,s]=i.useState("Ping another server"),x=g=>{d(!0),s("Pinging....."),f.get(route("run.ping-from-to",[t,g.target.id])).then(u=>{console.log("Ran ping"),Object.keys(u.data).length===0?m(""):m("AVG: "+u.data.avg+" MIN: "+u.data.min+" MAX: "+u.data.max),d(!1),s("Ping another server")}).catch(u=>{console.log("Error running ping"),d(!1),s("Ping another server")})};return a("div",{className:"grid md:grid-cols-2 grid-cols-1 mt-2",children:[e("div",{className:"col-span-2 md:col-span-1",children:e(y,{label:o,dismissOnClick:!1,disabled:r,className:"dark:bg-gray-500",size:"sm",children:n.map(g=>e(y.Item,{className:r?"hidden":null,children:a("a",{onClick:x,id:g.id,children:[g.hostname," (",g.title,")"]})},g.id))})}),e("div",{className:"col-span-2 md:col-span-1",children:e("code",{className:"text-red-500 dark:text-red-400",children:h})})]})}function ne({commands:t}){return e("dl",{children:e("dd",{className:"mb-2 font-light text-gray-600 sm:mb-5 dark:text-gray-300",children:t.map(n=>e("code",{className:"text-red-500 dark:text-red-400",children:e("p",{className:"mt-2",children:e("a",{href:route("outputs.show",n.id),children:n.the_command})})},n.id))})})}function ke({auth:t}){const n=p().props.alert,r=p().props.resource,d=p().props.servers,[h,m]=b.useState(!1),o=()=>{const s={method:"DELETE",headers:{"X-CSRF-TOKEN":document.getElementsByName("csrf-token")[0].getAttribute("content")}};fetch(route("server.destroy",r.id),s).then(x=>{x.redirected&&(window.location.href=x.url)})};return a(M,{auth:t,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:r.title}),children:[e(E,{title:"Server "+r.hostname}),a("div",{className:"py-8 px-2 mx-auto max-w-7xl lg:py-10",children:[e("div",{className:"flex flex-wrap gap-2 mb-4",children:e(Q,{href:route("server.index"),children:"Back to servers"})}),e(V,{details:n}),e("section",{className:"bg-white/50 dark:bg-gray-700 rounded-lg shadow-sm",children:a("div",{className:"py-4 px-4 mx-auto max-w-7xl",children:[a("div",{className:"flex items-center justify-between mb-4",children:[a("div",{children:[r.operating_system!==null?e("span",{className:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2 py-0.5 rounded dark:bg-green-900 dark:text-green-300",children:r.operating_system}):null,e("span",{className:"bg-indigo-200 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-indigo-900 dark:text-indigo-300",children:r.type.name})]}),a("small",{className:"text-end",children:[e(q,{className:"mr-2 h-6 w-6 text-gray-600 dark:text-white hover:text-gray-700 hover:dark:text-gray-300 inline hover:cursor-pointer",onClick:()=>m(!0),title:"Delete server"}),(()=>{if(typeof r.conn<"u"&&r.conn!==null&&(typeof r.cpu_freq>"u"||r.cpu_freq===null))return e(W,{className:"md:ml-2 ml-1 h-6 w-6 text-gray-600 dark:text-white inline hover:cursor-pointer",onClick:s=>window.location.href=route("server.get-information",r.id),title:"Fetch server specs"})})(),e(z,{className:"md:ml-2 ml-1 h-6 w-6 text-gray-600 dark:text-white inline hover:cursor-pointer",onClick:s=>window.location.href=route("server.edit",r.id),title:"Edit server"}),(()=>{if(typeof r.conn<"u"&&r.conn!==null)return e(K,{className:"md:ml-2 ml-1 h-6 w-6 text-gray-600 dark:text-white inline hover:cursor-pointer",onClick:s=>window.location.href=route("connection.show",r.conn.id),title:"Go to connection"})})(),(()=>{if(typeof r.sftp_conn<"u"&&r.sftp_conn!==null)return e(X,{className:"md:ml-3 ml-2 h-6 w-6 text-gray-600 dark:text-white inline hover:cursor-pointer",onClick:s=>window.location.href=route("sftp.show",r.sftp_conn.id),title:"Go to SFTP connection"})})(),e(te,{resource:r})]})]}),a("div",{className:"grid md:grid-cols-2 grid-cols-1",children:[e("div",{className:"md:col-span-1 col-span-2",children:e(ee,{resource:r})}),a("div",{className:"md:col-span-1 col-span-2",children:[e("p",{className:"mb-2 text-gray-700 dark:text-gray-300",children:r.cpu??null}),e($,{connection:r.conn})]})]}),a("div",{className:"grid md:grid-cols-2 grid-cols-1",children:[e("div",{className:"col-span-1",children:e(Z,{resource:r})}),e("div",{className:"col-span-1",children:(()=>{if(r.conn!==null&&r.conn.outputs_last3!==null&&r.conn.outputs_last3.length>0)return a(c,{children:[e("p",{className:"mb-2 text-gray-800 dark:text-gray-200",children:"Last 3 commands ran"}),e(ne,{commands:r.conn.outputs_last3})]})})()})]}),e(ae,{serverId:r.id,usage:null,uptime:null}),(()=>{if(typeof r.conn<"u"&&r.conn!==null&&d.length>0)return e(re,{serverId:r.id,servers:d})})(),a("div",{className:"grid md:grid-cols-2 grid-cols-1 mt-4",children:[e("div",{className:"col-span-1",children:e(Y,{created_at:r.created_at,string_format:"hh:mm:ssa do LLL yyyy"})}),e("div",{className:"col-span-1",children:e(J,{updated_at:r.updated_at,string_format:"hh:mm:ssa do LLL yyyy"})})]})]})})]}),e(N,{show:h,size:"md",children:e(N.Body,{children:a("div",{className:"text-center",children:[e("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this server?"}),a("div",{className:"flex justify-center gap-4",children:[e(k,{color:"failure",onClick:o,children:"Yes, I'm sure"}),e(k,{onClick:()=>m(!1),color:"gray",children:"No, cancel"})]})]})})})]})}export{ke as default};
