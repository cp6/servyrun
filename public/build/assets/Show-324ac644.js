import{A as p}from"./AuthenticatedLayout-b0ac98cc.js";import{u as d,r as n,j as a,a as e,H as y}from"./app-7082a047.js";import{M as o,B as i}from"./Toast-a9c7a83a.js";import"./Table-13305096.js";import{H as f,a as b,b as w}from"./index.esm-eebfcfab.js";import{R as N}from"./Alert-af0dbb46.js";import{a as k}from"./axios-4a70c6fc.js";import{B as v}from"./BackButton-c0685269.js";import{C as m}from"./CreatedAtText-a1e22ba4.js";import{U as L}from"./UpdatedAtText-1126b185.js";import"./ApplicationLogo-db4f8950.js";import"./transition-eb04b526.js";import"./index-9b0dda6f.js";function R({auth:c}){const h=d().props.alert,t=d().props.resource,[x,s]=n.useState(!1);n.useState(null);const u=()=>{const r={method:"DELETE",headers:{"X-CSRF-TOKEN":document.getElementsByName("csrf-token")[0].getAttribute("content")}};fetch(route("mysqldump.destroy",t.id),r).then(l=>{l.redirected&&(window.location.href=l.url)})},g=()=>{k.get(route("mysqldump.run",t.id)).then(r=>{window.location.reload()}).catch(r=>{console.log("Error getting version")})};return a(p,{auth:c,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"MySQL dump"}),children:[e(y,{title:"MySQL dump"}),a("div",{className:"py-8 px-2 mx-auto max-w-7xl lg:py-10",children:[e("div",{className:"flex flex-wrap gap-2 mb-4",children:e(v,{href:route("mysqldump.index"),children:"Back to MySQL dumps"})}),e(N,{details:h}),e("section",{className:"bg-white/50 dark:bg-gray-700 rounded-lg shadow-sm",children:a("div",{className:"py-4 px-4 mx-auto max-w-7xl",children:[a("div",{className:"flex items-center justify-between",children:[a("div",{children:["           ",e("span",{className:"bg-indigo-200 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-indigo-900 dark:text-indigo-300",children:a("a",{href:route("db.show",t.database.id),children:["Database ",t.database.name]})}),t.version!==null?e("span",{className:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300",children:a("a",{href:route("server.show",t.server.id),children:["Server ",t.server.title]})}):null]}),a("small",{className:"text-end",children:[e(f,{className:"mr-2 h-6 w-6 text-gray-600 dark:text-white hover:text-gray-700 hover:dark:text-gray-300 inline hover:cursor-pointer",onClick:()=>s(!0),title:"Delete MySQL dump"}),e(b,{className:"md:ml-2 ml-1 h-6 w-6 text-gray-600 dark:text-white inline hover:cursor-pointer",onClick:r=>window.location.href=route("mysqldump.edit",t.id),title:"Edit MySQL dump"}),e(w,{className:"md:ml-3 ml-1 h-6 w-6 text-gray-600 dark:text-white hover:text-gray-700 hover:dark:text-gray-300 inline hover:cursor-pointer",onClick:g,title:"Run this MySQL dump"})]})]}),(()=>typeof t.these_tables<"u"&&t.these_tables!==null?a("h2",{className:"mt-4 mb-2 text-xl font-bold leading-none text-gray-600 md:text-2xl dark:text-gray-300",children:["These tables only: ",e("span",{className:"text-gray-900 dark:text-white",children:t.these_tables})]}):e("h2",{className:"mt-4 mb-2 text-xl font-bold leading-none text-gray-900 md:text-2xl dark:text-white",children:"Whole database"}))(),a("h2",{className:"mt-4 mb-2 text-md font-bold leading-none text-gray-600 md:text-xl dark:text-gray-300",children:["Save as: ",a("span",{className:"text-gray-900 dark:text-white",children:[t.save_to,"/",t.save_as]})]}),a("h2",{className:"mt-4 mb-2 text-xl font-bold leading-none text-gray-600 md:text-xl dark:text-gray-300",children:["DB user: ",e("span",{className:"text-gray-900 dark:text-white",children:t.database_conn.username})]}),e("p",{className:"mb-4 text-xl font-bold leading-none md:text-2xl text-gray-900 dark:text-white",children:t.compress===1?"compress":null}),e("p",{className:"mb-4 text-xl font-bold leading-none text-gray-800 md:text-2xl dark:text-gray-300",children:t.flags}),a("div",{className:"grid md:grid-cols-3 grid-cols-3",children:[e("div",{className:"col-span-1",children:e(m,{created_at:t.created_at,string_format:"hh:mm:ssa do LLL yyyy"})}),e("div",{className:"col-span-1",children:e(L,{updated_at:t.updated_at,string_format:"hh:mm:ssa do LLL yyyy"})}),e("div",{className:"col-span-1",children:t.last_ran!==null?e(m,{created_at:t.last_ran,string_format:"hh:mm:ssa do LLL yyyy",pre_text:"Last ran at: "}):null})]})]})})]}),e(o,{show:x,size:"md",children:e(o.Body,{children:a("div",{className:"text-center",children:[e("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this MySQL dump?"}),a("div",{className:"flex justify-center gap-4",children:[e(i,{color:"failure",onClick:u,children:"Yes, I'm sure"}),e(i,{onClick:()=>s(!1),color:"gray",children:"No, cancel"})]})]})})})]})}export{R as default};
