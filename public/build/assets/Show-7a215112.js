import{A as x}from"./AuthenticatedLayout-e0b7f8ec.js";import{u as i,r as g,j as t,a as e,H as y}from"./app-3b14edf2.js";import{M as o,B as d}from"./Toast-1f814f61.js";import"./Table-29b362e9.js";import{H as p,k as u}from"./index.esm-b46f3593.js";import{R as f}from"./Alert-10dd726c.js";import{C as N}from"./CreatedAtText-569a5c4f.js";import{B as k}from"./BackButton-d8b9f37c.js";import"./ApplicationLogo-30229999.js";import"./transition-da3d9d06.js";import"./index-a84c5b70.js";function T({auth:n}){const c=i().props.alert,r=i().props.resource,[m,s]=g.useState(!1),h=()=>{const a={method:"DELETE",headers:{"X-CSRF-TOKEN":document.getElementsByName("csrf-token")[0].getAttribute("content")}};fetch(route("key.destroy",r.id),a).then(l=>{l.redirected&&(window.location.href=l.url)})};return t(x,{auth:n,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Key "+r.original_name}),children:[e(y,{title:"Key "+r.id}),t("div",{className:"py-8 px-2 mx-auto max-w-7xl lg:py-10",children:[e("div",{className:"flex flex-wrap gap-2 mb-4",children:e(k,{href:route("key.index"),children:"Back to keys"})}),e(f,{details:c}),e("section",{className:"bg-white/50 dark:bg-gray-700 rounded-lg shadow-sm",children:t("div",{className:"py-4 px-4 mx-auto max-w-7xl",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"bg-indigo-100 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-indigo-900 dark:text-indigo-300",children:r.password===null?"No password":"Has password"}),t("small",{className:"text-sm text-gray-700",children:[e(p,{className:"mr-2 h-6 w-6 text-gray-600 dark:text-white hover:text-gray-700 hover:dark:text-gray-300 inline hover:cursor-pointer",onClick:()=>s(!0),title:"Delete key"}),e(u,{className:"md:ml-2 ml-1 h-6 w-6 text-gray-600 dark:text-white inline hover:cursor-pointer",onClick:a=>window.location.href=route("key.download",r.id),title:"Download key"})]})]}),t("div",{className:"grid grid-cols-2",children:[t("div",{className:"md:col-span-1 col-span-2",children:[e("h2",{className:"mt-4 mb-2 text-xl font-bold leading-none text-gray-900 md:text-2xl dark:text-white",children:r.original_name}),e("p",{className:"mb-4 text-lg font-bold leading-none text-gray-600 md:text-lg dark:text-gray-400",children:r.file_id})]}),e("div",{className:"md:col-span-1 col-span-2 pl-4",children:(()=>r.conn.length>0?t("div",{className:"mt-2",children:[t("h2",{className:"text-md font-bold my-2 text-gray-800 md:text-lg dark:text-gray-200",children:["Servers using this key (",r.conn.length,")"]}),e("ul",{className:"list-disc",children:r.conn.map(a=>e("li",{className:"text-gray-800 dark:text-gray-300",children:t("a",{href:route("server.show",a.server.id),children:[a.server.hostname," (",a.server.title,")"]})},a.server.id))})]}):e("h2",{className:"text-md ml-2 my-4 font-semibold leading-none text-gray-800 md:text-lg dark:text-gray-300",children:"There are no servers in this group"}))()})]}),t("div",{className:"grid md:grid-cols-2 grid-cols-1",children:[e("div",{className:"col-span-1",children:e(N,{created_at:r.created_at,string_format:"hh:mm:ssa do LLL yyyy"})}),e("div",{className:"col-span-1"})]})]})})]}),e(o,{show:m,size:"md",children:e(o.Body,{children:t("div",{className:"text-center",children:[e("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this Key?"}),t("div",{className:"flex justify-center gap-4",children:[e(d,{color:"failure",onClick:h,children:"Yes, I'm sure"}),e(d,{onClick:()=>s(!1),color:"gray",children:"No, cancel"})]})]})})})]})}export{T as default};
