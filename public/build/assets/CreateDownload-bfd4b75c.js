import{A as D}from"./AuthenticatedLayout-c4be06bd.js";import{u as p,b as k,r as l,j as t,a as e,H as I}from"./app-a8d4275f.js";import{I as u}from"./InputLabel-a7ee92ff.js";import{T as f,I as h}from"./TextInput-1e9aadbd.js";import{P}from"./PrimaryButton-19cc4f5a.js";import{R as S}from"./Alert-d503f44b.js";import{A as B,e as _}from"./index.esm-2010c99b.js";import{B as C}from"./BackButton-2b60c346.js";import{T as F}from"./TealButton-374c27c1.js";import{P as T}from"./ProgressBar-0f70cb6b.js";import{a as E}from"./axios-4a70c6fc.js";import"./ApplicationLogo-ae419612.js";import"./transition-fbe58e1e.js";import"./Toast-ee00046f.js";import"./Table-f19b692a.js";function X({auth:g}){const r=p().props.resource,v=p().props.alert,{data:i,setData:n,post:x,processing:w,reset:j,errors:m}=k({filepath:"",save_as:""}),[o,d]=l.useState(!1),[N,c]=l.useState(null);async function y(a){return await(await E.get(route("sftp.download-to-server.progress",a.id))).data}l.useEffect(()=>{let a;return o?a=setInterval(()=>{y(r).then(s=>{c(s.progress)})},500):o||(c(null),clearInterval(a)),()=>clearInterval(a)},[o]);const b=a=>{a.preventDefault(),x(route("sftp.download-to-server",r.id),{onStart:s=>{d(!0)},onFinish:s=>{d(!1)}})};return t(D,{auth:g,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Download file to surcuri"}),children:[e(I,{title:"Download file to surcuri"}),t("div",{className:"py-8 px-2 mx-auto max-w-7xl lg:py-10",children:[t("div",{className:"flex flex-wrap gap-2 mb-4",children:[e(C,{href:route("sftp.show",r.id),children:"Back to SFTP connection"}),t(F,{href:route("downloaded.index"),children:[e(B,{className:"mr-2 h-5 w-5"}),"Downloaded files"]})]}),e(S,{details:v}),e("section",{className:"bg-white/50 dark:bg-gray-700 rounded-lg shadow-sm",children:t("div",{className:"py-6 px-4 mx-auto max-w-7xl",children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Download file from SFTP to this surcuri host"}),e("small",{className:"text-end",children:e(_,{className:"md:ml-3 ml-2 h-6 w-6 text-gray-600 dark:text-white inline hover:cursor-pointer",onClick:a=>window.location.href=route("server.show",r.server.id),title:"Go to server"})})]}),t("form",{onSubmit:b,children:[t("div",{className:"grid gap-2 sm:grid-cols-1 md:grid-cols-6 sm:gap-4",children:[t("div",{className:"md:col-span-4 col-span-6",children:[e(u,{forInput:"filepath",value:"Full file path and name"}),e(f,{name:"filepath",value:i.filepath,className:"mt-1 block w-full",autoComplete:"filepath",handleChange:a=>n("filepath",a.target.value),maxLength:255}),e(h,{message:m.filepath,className:"mt-2"})]}),t("div",{className:"md:col-span-2 col-span-6",children:[e(u,{forInput:"save_as",value:"Save as (leave empty to use original filename"}),e(f,{name:"save_as",value:i.save_as,className:"mt-1 block w-full",autoComplete:"save_as",handleChange:a=>n("save_as",a.target.value),maxLength:64}),e(h,{message:m.save_as,className:"mt-2"})]})]}),e(P,{className:"inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center text-white bg-primary-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800",processing:w,children:"Download"})]}),e(T,{value:N})]})})]})]})}export{X as default};
